<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smart Dropzone - Simple Test</title>
    <style>
      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background: #f8fafc;
      }
      .test-section {
        background: white;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }
      .test-title {
        color: #1e40af;
        border-bottom: 2px solid #3b82f6;
        padding-bottom: 10px;
        margin-bottom: 20px;
      }
      .btn {
        padding: 8px 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        background: #3b82f6;
        color: white;
        margin: 5px;
      }
      .btn:hover {
        background: #2563eb;
      }
      .log {
        background: #1f2937;
        color: #f9fafb;
        padding: 15px;
        border-radius: 6px;
        font-family: "Monaco", "Menlo", monospace;
        font-size: 12px;
        max-height: 300px;
        overflow-y: auto;
        margin: 20px 0;
      }
      .log-entry {
        margin: 5px 0;
        padding: 5px 0;
        border-bottom: 1px solid #374151;
      }
      .log-entry.error {
        color: #f87171;
      }
      .log-entry.warn {
        color: #fbbf24;
      }
      .log-entry.info {
        color: #60a5fa;
      }
      .log-entry.success {
        color: #34d399;
      }
      .status {
        padding: 10px;
        border-radius: 4px;
        margin: 10px 0;
        font-weight: 500;
      }
      .status.success {
        background: #d1fae5;
        color: #065f46;
        border: 1px solid #10b981;
      }
      .status.error {
        background: #fee2e2;
        color: #991b1b;
        border: 1px solid #ef4444;
      }
      .status.info {
        background: #dbeafe;
        color: #1e40af;
        border: 1px solid #3b82f6;
      }
    </style>
  </head>
  <body>
    <h1 class="test-title">üß™ Smart Dropzone - Simple Test</h1>

    <!-- Test Controls -->
    <div class="test-section">
      <h2>üéÆ Test Controls</h2>
      <button class="btn" onclick="testBasicImport()">Test Basic Import</button>
      <button class="btn" onclick="testConstants()">Test Constants</button>
      <button class="btn" onclick="testValidation()">Test Validation</button>
      <button class="btn" onclick="clearLog()">Clear Log</button>
      <div id="test-status"></div>
    </div>

    <!-- Test Results -->
    <div class="test-section">
      <h2>‚úÖ Test Results</h2>
      <div id="test-results"></div>
    </div>

    <!-- Test Log -->
    <div class="test-section">
      <h2>üìù Test Log</h2>
      <div id="log-container" class="log"></div>
    </div>

    <script type="module">
      // Simple test without complex imports
      let testResults = {};

      // Test basic import functionality
      window.testBasicImport = async function () {
        log("info", "üß™ Testing basic import functionality...");
        updateStatus("Testing imports...", "info");

        try {
          // Try to import the module
          const module = await import("./dist/index.js");
          log("success", "‚úÖ Module imported successfully");

          // Check what's available
          const availableExports = Object.keys(module);
          log("info", `üì¶ Available exports: ${availableExports.length} items`);
          log(
            "info",
            `üìã Exports: ${availableExports.slice(0, 10).join(", ")}${availableExports.length > 10 ? "..." : ""}`
          );

          // Test specific exports
          if (module.FILE_SIZE) {
            log("success", "‚úÖ FILE_SIZE constants available");
            testResults.fileSize = "passed";
          } else {
            log("error", "‚ùå FILE_SIZE constants not available");
            testResults.fileSize = "failed";
          }

          if (module.InputValidator) {
            log("success", "‚úÖ InputValidator available");
            testResults.inputValidator = "passed";
          } else {
            log("error", "‚ùå InputValidator not available");
            testResults.inputValidator = "failed";
          }

          if (module.UploadError) {
            log("success", "‚úÖ UploadError available");
            testResults.uploadError = "passed";
          } else {
            log("error", "‚ùå UploadError not available");
            testResults.uploadError = "failed";
          }

          updateStatus("Import test completed", "success");
          updateTestResults();
        } catch (error) {
          log("error", `‚ùå Import failed: ${error.message}`);
          updateStatus("Import test failed", "error");
          testResults.import = "failed";
          updateTestResults();
        }
      };

      // Test constants
      window.testConstants = async function () {
        log("info", "üß™ Testing configuration constants...");
        updateStatus("Testing constants...", "info");

        try {
          const module = await import("./dist/index.js");

          // Test FILE_SIZE constants
          if (module.FILE_SIZE) {
            const fileSize = module.FILE_SIZE;
            log(
              "info",
              `üìè File size constants: ${Object.keys(fileSize).length} items`
            );

            // Test specific values
            if (fileSize.BYTES_PER_MB === 1024 * 1024) {
              log("success", "‚úÖ BYTES_PER_MB = 1MB (correct)");
            } else {
              log(
                "error",
                `‚ùå BYTES_PER_MB = ${fileSize.BYTES_PER_MB} (expected 1048576)`
              );
            }

            if (fileSize.BYTES_PER_GB === 1024 * 1024 * 1024) {
              log("success", "‚úÖ BYTES_PER_GB = 1GB (correct)");
            } else {
              log(
                "error",
                `‚ùå BYTES_PER_GB = ${fileSize.BYTES_PER_GB} (expected 1073741824)`
              );
            }
          }

          // Test TIMING constants
          if (module.TIMING) {
            const timing = module.TIMING;
            log(
              "info",
              `‚è±Ô∏è Timing constants: ${Object.keys(timing).length} items`
            );

            if (timing.ANIMATION_DURATION === 300) {
              log("success", "‚úÖ ANIMATION_DURATION = 300ms (correct)");
            } else {
              log(
                "error",
                `‚ùå ANIMATION_DURATION = ${timing.ANIMATION_DURATION} (expected 300)`
              );
            }
          }

          // Test QUALITY constants
          if (module.QUALITY) {
            const quality = module.QUALITY;
            log(
              "info",
              `üé® Quality constants: ${Object.keys(quality).length} items`
            );

            if (quality.DEFAULT_IMAGE_QUALITY === 0.8) {
              log("success", "‚úÖ DEFAULT_IMAGE_QUALITY = 0.8 (correct)");
            } else {
              log(
                "error",
                `‚ùå DEFAULT_IMAGE_QUALITY = ${quality.DEFAULT_IMAGE_QUALITY} (expected 0.8)`
              );
            }
          }

          testResults.constants = "passed";
          log("success", "‚úÖ Constants test completed successfully");
          updateStatus("Constants test completed", "success");
        } catch (error) {
          log("error", `‚ùå Constants test failed: ${error.message}`);
          updateStatus("Constants test failed", "error");
          testResults.constants = "failed";
        }

        updateTestResults();
      };

      // Test validation functionality
      window.testValidation = async function () {
        log("info", "üß™ Testing validation functionality...");
        updateStatus("Testing validation...", "info");

        try {
          const module = await import("./dist/index.js");

          if (module.InputValidator) {
            const validator = module.InputValidator;
            log(
              "info",
              `üîß InputValidator methods: ${Object.getOwnPropertyNames(validator).filter((name) => typeof validator[name] === "function").length} methods`
            );

            // Test file validation
            try {
              const fileValidation = validator.validateFile({
                name: "test.jpg",
                size: 1024,
                type: "image/jpeg",
              });

              if (
                fileValidation &&
                typeof fileValidation.isValid === "boolean"
              ) {
                log("success", "‚úÖ validateFile method works");
              } else {
                log("error", "‚ùå validateFile returned invalid result");
              }
            } catch (error) {
              log("error", `‚ùå validateFile failed: ${error.message}`);
            }

            // Test file list validation
            try {
              const listValidation = validator.validateFileList([
                { name: "test1.jpg", size: 1024, type: "image/jpeg" },
                { name: "test2.png", size: 2048, type: "image/png" },
              ]);

              if (
                listValidation &&
                typeof listValidation.isValid === "boolean"
              ) {
                log("success", "‚úÖ validateFileList method works");
              } else {
                log("error", "‚ùå validateFileList returned invalid result");
              }
            } catch (error) {
              log("error", `‚ùå validateFileList failed: ${error.message}`);
            }

            testResults.validation = "passed";
            log("success", "‚úÖ Validation test completed successfully");
          } else {
            log("error", "‚ùå InputValidator not available");
            testResults.validation = "failed";
          }

          updateStatus("Validation test completed", "success");
        } catch (error) {
          log("error", `‚ùå Validation test failed: ${error.message}`);
          updateStatus("Validation test failed", "error");
          testResults.validation = "failed";
        }

        updateTestResults();
      };

      window.clearLog = function () {
        const logContainer = document.getElementById("log-container");
        logContainer.innerHTML = "";
        log("info", "Log cleared");
      };

      // Utility functions
      function log(level, message) {
        const logContainer = document.getElementById("log-container");
        const entry = document.createElement("div");
        entry.className = `log-entry ${level}`;
        entry.innerHTML = `[${new Date().toLocaleTimeString()}] ${message}`;
        logContainer.appendChild(entry);
        logContainer.scrollTop = logContainer.scrollHeight;
      }

      function updateStatus(message, type) {
        const statusDiv = document.getElementById("test-status");
        statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
      }

      function updateTestResults() {
        const resultsDiv = document.getElementById("test-results");
        let html = "<h3>Test Results:</h3>";

        Object.entries(testResults).forEach(([test, result]) => {
          const statusIcon = result === "passed" ? "‚úÖ" : "‚ùå";
          const statusClass = result === "passed" ? "success" : "error";
          html += `<p class="status ${statusClass}">${statusIcon} <strong>${test}:</strong> ${result}</p>`;
        });

        resultsDiv.innerHTML = html;
      }

      // Initialize when page loads
      document.addEventListener("DOMContentLoaded", () => {
        log("success", "üöÄ Simple test page loaded successfully");
        updateStatus("Ready for testing", "success");
      });
    </script>
  </body>
</html>
